<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>一键生成初始化文件</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            text-decoration: none;
        }

        #quick-title {
            width: 100%;
            height: 100px;
            background: #0097e0;
            text-align: center;
            color: #fff;
            line-height: 100px;
        }

        #wx-doc {
            display: block;
            width: 100%;
            height: 30px;
            background: #0097e0;
            color: #fff;
            line-height: 30px;
            margin-bottom: 20px;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
        }

        .form {
            width: 1200px;
            margin: 0 auto;
        }

        .form-item {
            overflow: hidden;
        }

        .form-item-title {
            margin-bottom: 10px;
            font-size: 14px;
            float: left;
        }

        .form-item-input {
            width: 300px;
            height: 30px;
            border-radius: 5px;
            outline: none;
            border: 1px solid #ccc;
            text-indent: 10px;
            font-size: 14px;
            margin-bottom: 10px;
            float: right;
        }

        .from-item-detail {
            width: 100%;
            float: left;
            display: flex;
        }

        .from-item-detail-item {
            flex: 1;
        }

        .from-item-detail-item2 {
            flex: 2;
        }

        .from-item-detail-item3 {
            flex: 3;
        }

        .js-box .from-item-detail-item {
            flex: 1;
        }

        .js-box .from-item-detail-item5 {
            flex: 1.3
        }

        .from-item-detail-item-explain {
            font-size: 14px;
        }

        .form-button {
            display: block;
            width: 200px;
            height: 50px;
            font-size: 18px;
            border: none;
            outline: none;
            background: #ccc;
            border-radius: 5px;
            margin: 30px auto;
            text-align: center;
        }

        .warn {
            border: 1px solid rgb(241, 37, 37);
        }

        .complete {
            border: 1px solid #0097e0;
        }

        .active {
            background: #0097e0;
            color: #fff;
        }

        .intro-title {
            width: 100%;
            background: #0097e0;
            height: 50px;
            font-size: 18px;
            line-height: 50px;
            color: #fff;
            text-align: center;
        }

        .intro-box {
            width: 1200px;
            margin: 10px auto 0;
        }

        .intro-box-item {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .intro-box-item-href {
            color: #0097e0;
            margin: 0 5px;
            cursor: pointer;
        }

        /* 复制代码 */
        .copy {
            height: 260px;
        }

        .copy-text {
            float: left;
            width: 900px;
            height: 250px;
            outline: none;
            border: 1px solid #0097e0;
            border-radius: 5px;
            font-size: 14px;
            line-height: 26px;
            padding: 10px;
            box-sizing: border-box;
        }

        .copy-button {
            float: right;
            width: 200px;
            height: 50px;
            color: #fff;
            background: #0097e0;
            outline: none;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            margin-top: 100px;
        }

        /* 几个盒子样式 */
        .wx-box,
        .js-box,
        .android-box,
        .iOS-box {
            display: none;
        }
    </style>
</head>

<body>
    <h1 id="quick-title">易观微信小程序SDK快速接入</h1>
    <a href="https://docs.analysys.cn/ark/integration/sdk/wx" id="wx-doc">小程序说明文档</a>
    <form class="form">
        <div class="form-item">
            <p class="form-item-title">1，请输入项目的appid(方舟项目唯一标示):</p>
            <input type="text" placeholder="请输入项目的appid" class="form-item-input" id="form-app" />
        </div>
        <div class="form-item">
            <p class="form-item-title">2，请输入项目的uploadUrl(数据接收地址):</p>
            <input type="text" placeholder="请输入上报地址" class="form-item-input" id="form-url" />
        </div>
        <!-- 小程序板块 -->
        <div id="wx-box" class="wx-box">
            <div class="form-item">
                <p class="form-item-title">3，SDK文件的存放地址(相对于app.js 或者绝对路径):</p>
                <input type="text" placeholder="SDK文件的存放地址" class="form-item-input form-place0" id="form-place" />
            </div>
            <div class="form-item">
                <p class="form-item-title">4，是否开启页面的自动采集:</p>
                <div class="from-item-detail">
                    <div class="from-item-detail-item">
                        <input type="checkbox" name="pageView" class="form-item-pageView-fibbden0" />
                        禁止
                    </div>
                    <div class="from-item-detail-item  from-item-detail-item2">
                        <input type="checkbox" name="pageView" class="form-item-pageView-auto0" />
                        采集页面浏览事件
                        <p class="from-item-detail-item-explain">·每次打开页面会发送$pageview 事件</p>
                    </div>
                    <div class="from-item-detail-item from-item-detail-item3">
                        <input type="checkbox" name="pageView" class="form-item-track-auto0" />
                        采集绑定事件元素的点击（全埋点需要选择这个）
                        <p class="from-item-detail-item-explain">
                            ·采集绑定了事件的元素，支持tap、longtap、longPress，但需要设置data-content等，否则数据无法区分
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- js 板块 -->
        <div id="js-box" class="js-box">
            <div class="form-item">
                <p class="form-item-title">3，SDK文件的存放地址(相对于首页 index.html 或者绝对路径):</p>
                <input type="text" placeholder="SDK文件的存放地址" class="form-item-input form-place1" id="form-place" />
            </div>
            <div class="form-item">
                <p class="form-item-title">4，是否开启页面的自动采集:</p>
                <div class="from-item-detail">
                    <div class="from-item-detail-item">
                        <input type="checkbox" name="pageView" class="form-item-pageView-fibbden1" /> 禁止
                    </div>
                    <div class="from-item-detail-item  from-item-detail-item2">
                        <input type="checkbox" name="pageView" class="form-item-pageView-auto1" />
                        采集页面浏览事件
                        <p class="from-item-detail-item-explain">·每次打开页面会发送$pageview 事件</p>
                    </div>
                    <div class="from-item-detail-item from-item-detail-item3">
                        <input type="checkbox" name="pageView" class="form-item-track-auto1" />
                        采集绑定事件元素的点击（全埋点需要选择这个）
                        <p class="from-item-detail-item-explain">
                            ·采集绑定了事件的元素，支持tap、longtap、longPress，但需要设置data-content等，否则数据无法区分
                        </p>
                    </div>
                </div>
            </div>
            <div class="form-item">
                <p class="form-item-title">5，JSSDK集成方式:</p>
                <div class="from-item-detail">
                    <div class="from-item-detail-item">
                        <input type="radio" name="integrated" class="form-item-pageView" id="form-inter-sync"
                            checked="checked" />
                        异步集成(推荐)
                    </div>
                    <div class="from-item-detail-item  from-item-detail-item2">
                        <input type="radio" name="integrated" class="form-item-pageView" id="form-inter-async" />
                        同步集成
                    </div>
                    <div class="from-item-detail-item from-item-detail-item3">
                        <input type="radio" name="integrated" class="form-item-pageView" id="form-inter-es6" />ES6方式集成
                    </div>
                    <div class="from-item-detail-item  from-item-detail-item4">
                        <input type="radio" name="integrated" class="form-item-pageView" id="form-inter-common" />
                        CommonJS规范集成
                    </div>
                    <div class="from-item-detail-item  from-item-detail-item5">
                        <input type="radio" name="integrated" class="form-item-pageView" id="form-inter-AMD" />
                        AMD 规范集成（以 RequireJS 为例）
                    </div>
                </div>
            </div>
        </div>
        <!--  android 板块-->
        <div id="android-box" class="android-box">

        </div>
        <!-- ios 板块 -->
        <div id="iOS-box" class="iOS-box">

        </div>
        <a id="download">
            <input type="button" value="一键生成" class="form-button" id="form-button" />
        </a>
        <!-- 生成的代码放进 textarea 方便复制,存放init代码或者引用 -->
        <div id="copy" class="copy copy0">
            <textarea id="copy-text" class="copy-text copy-text0">

            </textarea>
            <button type="button" id="copy-button" class="copy-button copy-button0">复制代码</button>
        </div>
    </form>
    <!-- 下载文件使用说明 -->
    <h2 class="intro-title">下载文件的介绍及使用说明</h2>
    <div class="intro-box  wx-box" id="wx-box-intro">
        <p class="intro-box-item">1，文件内容为初始化代码，根据相关选项已经配置。</p>
        <p class="intro-box-item">2，配置项不止上面的配置，更多功能查看<a href="https://docs.analysys.cn/ark/integration/sdk/wx"
                class="intro-box-item-href">微信小程序SDK说明文档</a>。</p>
        <p class="intro-box-item">3，打开文件复制代码到 app.js (微信原生开发）最上面。</p>
        <p class="intro-box-item">4，可加微信：nlfxwz、钉钉群：30099866，发送邮件至邮箱：nielifeng@analysys.com.cn 获得支持或者了解更多。</p>
    </div>
    <!-- JS下载文件使用说明 -->
    <div class="intro-box js-box" id="js-box-intro">
        <p class="intro-box-item">1，文件内容为初始化代码，根据相关选项已经配置。</p>
        <p class="intro-box-item">2，配置项不止上面的配置，更多功能查看<a href="https://docs.analysys.cn/ark/integration/sdk/js"
                class="intro-box-item-href">JavascriptSDK说明文档</a>。</p>
        <p class="intro-box-item">3，可加微信：nlfxwz、钉钉群：30099866，发送邮件至邮箱：nielifeng@analysys.com.cn 获得支持或者了解更多。</p>
    </div>
    <!-- JS下载文件使用说明 -->
    <div class="intro-box js-box" id="android-box-intro">
        <p class="intro-box-item">1，文件内容为初始化代码，根据相关选项已经配置。</p>
        <p class="intro-box-item">2，配置项不止上面的配置，更多功能查看<a href="https://docs.analysys.cn/ark/integration/sdk/android"
                class="intro-box-item-href">JavascriptSDK说明文档</a>。</p>
        <p class="intro-box-item">3，可加微信：nlfxwz、钉钉群：30099866，发送邮件至邮箱：nielifeng@analysys.com.cn 获得支持或者了解更多。</p>
    </div>



</body>
<script>
    (function (global, factory) {
        if (typeof define === "function" && define.amd) {
            define([], factory);
        } else if (typeof exports !== "undefined") {
            factory();
        } else {
            var mod = {
                exports: {}
            };
            factory();
            global.FileSaver = mod.exports;
        }
    })(this, function () {
        "use strict";

        /*
        * FileSaver.js
        * A saveAs() FileSaver implementation.
        *
        * By Eli Grey, http://eligrey.com
        *
        * License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)
        * source  : http://purl.eligrey.com/github/FileSaver.js
        */
        // The one and only way of getting global scope in all environments
        // https://stackoverflow.com/q/3277182/1008999
        var _global = typeof window === 'object' && window.window === window ? window : typeof self === 'object' && self.self === self ? self : typeof global === 'object' && global.global === global ? global : void 0;

        function bom(blob, opts) {
            if (typeof opts === 'undefined') opts = {
                autoBom: false
            }; else if (typeof opts !== 'object') {
                console.warn('Deprecated: Expected third argument to be a object');
                opts = {
                    autoBom: !opts
                };
            } // prepend BOM for UTF-8 XML and text/* types (including HTML)
            // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF

            if (opts.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
                return new Blob([String.fromCharCode(0xFEFF), blob], {
                    type: blob.type
                });
            }

            return blob;
        }

        function download(url, name, opts) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url);
            xhr.responseType = 'blob';

            xhr.onload = function () {
                saveAs(xhr.response, name, opts);
            };

            xhr.onerror = function () {
                console.error('could not download file');
            };

            xhr.send();
        }

        function corsEnabled(url) {
            var xhr = new XMLHttpRequest(); // use sync to avoid popup blocker

            xhr.open('HEAD', url, false);

            try {
                xhr.send();
            } catch (e) { }

            return xhr.status >= 200 && xhr.status <= 299;
        } // `a.click()` doesn't work for all browsers (#465)


        function click(node) {
            try {
                node.dispatchEvent(new MouseEvent('click'));
            } catch (e) {
                var evt = document.createEvent('MouseEvents');
                evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);
                node.dispatchEvent(evt);
            }
        } // Detect WebKit inside a native macOS app


        var isWebKit = /AppleWebKit/.test(navigator.userAgent);
        var saveAs = _global.saveAs || ( // probably in some web worker
            typeof window !== 'object' || window !== _global ? function saveAs() { }
                /* noop */
                // Use download attribute first if possible (#193 Lumia mobile) unless this is a native macOS app
                : 'download' in HTMLAnchorElement.prototype && !isWebKit ? function saveAs(blob, name, opts) {
                    var URL = _global.URL || _global.webkitURL;
                    var a = document.createElement('a');
                    name = name || blob.name || 'download';
                    a.download = name;
                    a.rel = 'noopener'; // tabnabbing
                    // TODO: detect chrome extensions & packaged apps
                    // a.target = '_blank'

                    if (typeof blob === 'string') {
                        // Support regular links
                        a.href = blob;

                        if (a.origin !== location.origin) {
                            corsEnabled(a.href) ? download(blob, name, opts) : click(a, a.target = '_blank');
                        } else {
                            click(a);
                        }
                    } else {
                        // Support blobs
                        a.href = URL.createObjectURL(blob);
                        setTimeout(function () {
                            URL.revokeObjectURL(a.href);
                        }, 4E4); // 40s

                        setTimeout(function () {
                            click(a);
                        }, 0);
                    }
                } // Use msSaveOrOpenBlob as a second approach
                    : 'msSaveOrOpenBlob' in navigator ? function saveAs(blob, name, opts) {
                        name = name || blob.name || 'download';

                        if (typeof blob === 'string') {
                            if (corsEnabled(blob)) {
                                download(blob, name, opts);
                            } else {
                                var a = document.createElement('a');
                                a.href = blob;
                                a.target = '_blank';
                                setTimeout(function () {
                                    click(a);
                                });
                            }
                        } else {
                            navigator.msSaveOrOpenBlob(bom(blob, opts), name);
                        }
                    } // Fallback to using FileReader and a popup
                        : function saveAs(blob, name, opts, popup) {
                            // Open a popup immediately do go around popup blocker
                            // Mostly only available on user interaction and the fileReader is async so...
                            popup = popup || open('', '_blank');

                            if (popup) {
                                popup.document.title = popup.document.body.innerText = 'downloading...';
                            }

                            if (typeof blob === 'string') return download(blob, name, opts);
                            var force = blob.type === 'application/octet-stream';

                            var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari;

                            var isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent);

                            if ((isChromeIOS || force && isSafari || isWebKit) && typeof FileReader !== 'undefined') {
                                // Safari doesn't allow downloading of blob URLs
                                var reader = new FileReader();

                                reader.onloadend = function () {
                                    var url = reader.result;
                                    url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;');
                                    if (popup) popup.location.href = url; else location = url;
                                    popup = null; // reverse-tabnabbing #460
                                };

                                reader.readAsDataURL(blob);
                            } else {
                                var URL = _global.URL || _global.webkitURL;
                                var url = URL.createObjectURL(blob);
                                if (popup) popup.location = url; else location.href = url;
                                popup = null; // reverse-tabnabbing #460

                                setTimeout(function () {
                                    URL.revokeObjectURL(url);
                                }, 4E4); // 40s
                            }
                        });
        _global.saveAs = saveAs.saveAs = saveAs;

        if (typeof module !== 'undefined') {
            module.exports = saveAs;
        }
    });
    // 逻辑开始
    var quickTitle = document.getElementById("quick-title")  // 页面标题
    var docUrl = document.getElementById("wx-doc");   // 微信文档 标题
    var formApp = document.getElementById("form-app");  // appid 输入框 
    var formU = document.getElementById("form-url");     // uploadUrl 输入框  
    var formSDK0 = document.getElementsByClassName("form-place0")[0];  // sdk 存放位置输入框 wx
    var formSDK1 = document.getElementsByClassName("form-place1")[0];  // sdk 存放位置输入框 js

    var formFibbden0 = document.getElementsByClassName("form-item-pageView-fibbden0")[0]  // wx 禁止选项
    var formAuto0 = document.getElementsByClassName("form-item-pageView-auto0")[0]  // wx 开启pageView 选项
    var formAutoTrack0 = document.getElementsByClassName("form-item-track-auto0")[0] // wx 开启全埋点选项
    var formFibbden1 = document.getElementsByClassName("form-item-pageView-fibbden1")[0]  // js 禁止选项
    var formAuto1 = document.getElementsByClassName("form-item-pageView-auto1")[0]  // js 开启pageView 选项
    var formAutoTrack1 = document.getElementsByClassName("form-item-track-auto1")[0] // js 开启全埋点选项

    var interSync = document.getElementById("form-inter-sync");  // js同步集成
    var interASync = document.getElementById("form-inter-async");  //js异步集成
    var interES6 = document.getElementById("form-inter-es6");   // ES6
    var interCom = document.getElementById("form-inter-common");   // common JS
    var interAMD = document.getElementById("form-inter-AMD");   // AMD 



    var formButton = document.getElementById("form-button");  // 一键生成按钮
    var downloadButton = document.getElementById("download");  // 一键生成外面的a 标签
    var copyText = document.getElementById("copy-text");  // textarea 区域 微信
    var copyButton = document.getElementById("copy-button"); // 复制代码按钮  微信
    var wxBox = document.getElementById("wx-box") // 微信板块
    var jsBox = document.getElementById("js-box")
    var androidBox = document.getElementById("android-box")
    var iOSBox = document.getElementById("iOS-box")
    var wxBoxIntro = document.getElementById("wx-box-intro")
    var jsBoxIntro = document.getElementById("js-box-intro")
    var androidIntro = document.getElementById("android-box-intro")


    // 参数判断 type = 1  微信小程序 2，javascript  3,安卓客户端   4，ios客户端 
    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
    var clientTitleList = ["易观微信小程序SDK快速接入", "易观JavascriptSDK快速接入", "易观Android客户端SDK快速接入", "易观iOS客户端SDK快速接入"];
    var clientDocTextList = ["易观微信小程序SDK说明文档", "易观JavascriptSDK说明文档", "易观Android客户端SDK说明文档", "易观iOS客户端SDK说明文档"];
    var clientDocList = ["wx", "js", "android", "ios"]
    var quickTitleText = clientTitleList[0];
    var clientType = GetQueryString("type");
    if (!clientType) clientType = 0;
    quickTitleText = clientTitleList[clientType]
    var docUrlText = "https://docs.analysys.cn/ark/integration/sdk/" + clientDocList[clientType];
    var clientDocText = clientDocTextList[clientType]
    quickTitle.innerHTML = quickTitleText;
    docUrl.innerHTML = clientDocText;
    docUrl.href = docUrlText;
    // 板块的显示
    var boxList = [wxBox, jsBox, androidBox, iOSBox];
    var boxIntroList = [wxBoxIntro, jsBoxIntro, androidIntro];
    boxList[clientType].style.display = "block";
    console.log(boxIntroList)
    boxIntroList[clientType].style.display = "block";

    // 监听方法 
    function onInput() {
        var appValue = formApp.value;
        var urlValue = formU.value;
        var SDKurlValue = formSDK0.value || formSDK1.value
        if (this.value != "") {
            this.classList.add("complete")
            this.classList.remove("warn")
        } else {
            this.classList.add("warn")
            this.classList.remove("complete")
        }
        if (appValue != "" && urlValue != "" && SDKurlValue != "") {
            formButton.classList.add("active");
        } else {
            formButton.classList.remove("active");

        }
    }
    // appid 输入框监听
    formApp.oninput = onInput
    // uploadURL 输入框监听
    formU.oninput = onInput
    // wx  SDK存放位置 输入框监听
    formSDK0.oninput = onInput
    // js SDK存放位置监听
    formSDK1.oninput = onInput
    // wx小程序的 添加判断 假如 选择了禁止，其他两个则不允许勾选
    function changeOn(auto, autoTrack) {
        if (this.checked) {
            auto.checked = false;
            autoTrack.checked = false;
            auto.setAttribute("disabled", "disabled")
            autoTrack.setAttribute("disabled", "disabled")
        } else {
            auto.removeAttribute("checked")
            autoTrack.removeAttribute("checked")
            auto.removeAttribute("disabled")
            autoTrack.removeAttribute("disabled")
        }
    }
    formFibbden0.onchange = changeOn(formAuto0, formAutoTrack0)
    // js 禁止和 选项勾线
    formFibbden1.onchange = changeOn(formAuto1, formAutoTrack1)
    // 一键生成 
    formButton.onclick = function () {
        if (this.classList.contains('active') == true) {
            var appV = formApp.value;
            var urlV = formU.value;
            // 微信小程序
            if (clientType == 0 || !clientType) {
                console.log("微信小程序")
                var SDKurlV = formSDK0.value;
                // 判断自动采集选中的值
                var formFibV = formFibbden0.checked;
                var formAutoV = formAuto0.checked;
                var formAutoTrackV = formAutoTrack0.checked;
                // 写入文件开始
                var writeStr = " //app.js \n" +
                    "let AnalysysAgent = require(\"" + SDKurlV + "/AnalysysAgent_WX_SDK.plugin.min.js\")  //插件版本 sdk \n" +
                    "let AnalysysEncryption = require(\"" + SDKurlV + "/AnalysysAgent_encryption.min.js\")   //加密板块，需要的话单独引入。\n" +
                    "AnalysysAgent.encrypt = AnalysysEncryption;\n" +
                    "AnalysysAgent.debugMode = 2 \n" +
                    "AnalysysAgent.appkey = " + appV + "\n" +
                    "AnalysysAgent.uploadURL = " + urlV + "\n" +
                    "AnalysysAgent.auto = " + formAutoV + "\n" +
                    "AnalysysAgent.autoTrack = " + formAutoTrackV;
                console.log(writeStr);
                // 文件写入 textarea
                copyText.innerHTML = writeStr;
                // var file = new Blob([writeStr], { type: "text/plain;charset=utf-8" });
                // downloadButton.href = URL.createObjectURL(file);
                // downloadButton.download = "AnalysysAgentInit.js";
            }
            // Javascript
            if (clientType == 1) {
                console.log("js板块")
                var SDKurlV = formSDK1.value;
                // 判断自动采集选中的值
                var formFibV = formFibbden1.checked;
                var formAutoV = formAuto1.checked;
                var formAutoTrackV = formAutoTrack1.checked;
                // 查看集成方式 
                var interSyncV = interSync.checked
                var interASyncV = interASync.checked
                var interES6V = interES6.checked
                var interComV = interCom.checked
                var interAMDV = interAMD.checked
                // 生成初始化文件 
                console.log(4444, interSyncV, interASyncV, interES6V, interComV, interAMDV)
                var jsStr = ""
                // 同步集成
                if (interSyncV) {
                    jsStr = "<script> \n" +
                        "   (function(config) { \n" +
                        "       window.AnalysysAgent = window.AnalysysAgent || []; \n" +
                        "       window.AnalysysAgent.methods = 'identify alias reset track profileSet profileSetOnce profileIncrement profileAppend profileUnset profileDelete registerSuperProperty registerSuperProperties unRegisterSuperProperty clearSuperProperties getSuperProperty getSuperProperties pageView getDistinctId getPresetProperties'.split(' '); \n" +
                        "       function factory(b) { \n" +
                        "           return function () { \n" +
                        "               var a = Array.prototype.slice.call(arguments); \n" +
                        "               a.unshift(b);\n" +
                        "               window.AnalysysAgent.push(a);\n" +
                        "               return window.AnalysysAgent;\n" +
                        "           }\n" +
                        "       };\n" +
                        "       for (var i = 0; i < AnalysysAgent.methods.length; i++) {\n" +
                        "           var key = window.AnalysysAgent.methods[i];\n" +
                        "           AnalysysAgent[key] = factory(key);\n" +
                        "       }\n" +
                        "       for (var key in config) {\n" +
                        "           if (!AnalysysAgent[key]) AnalysysAgent[key] = factory(key);\n" +
                        "           AnalysysAgent[key](config[key]);\n" +
                        "       }\n" +
                        "       var date = new Date();\n" +
                        "       var time = new String(date.getFullYear()) + new String(date.getMonth() + 1) + new String(date.getDate());\n" +
                        "       var d = document,\n" +
                        "           c = d.createElement('script'),\n" +
                        "           n = d.getElementsByTagName('script')[0];\n" +
                        "       c.type = 'text/javascript';\n" +
                        "       c.async = true;\n" +
                        "       c.id = 'ARK_SDK';\n" +
                        "       c.src = '/*设置为JS SDK实际存放地址*/' +'?v=' +time; //JS SDK存放地址\n" +
                        "       n.parentNode.insertBefore(c, n);\n" +
                        "   })({\n" +
                        "           appkey: " + appV + ", //APPKEY\n" +
                        "           uploadURL: " + urlV + ",//上传数据的地址\n" +
                        "           auto:" + formAutoV + ",// 是否开启自动采集\n" +
                        "           autoTrack:" + formAutoTrackV + ",// 是否开启全埋点\n" +
                        "    })\n" +
                        "<\/script>";
                    // 写入 复选框
                }
                // 异步集成
                if (interASyncV) {
                    jsStr = "<script>\n" +
                        "      (function(config) {\n" +
                        "           window.AnalysysAgent = window.AnalysysAgent || [];\n" +
                        "           window.AnalysysAgent.methods = 'identify alias reset track profileSet profileSetOnce profileIncrement profileAppend profileUnset profileDelete registerSuperProperty registerSuperProperties unRegisterSuperProperty clearSuperProperties getSuperProperty getSuperProperties pageView getDistinctId getPresetProperties'.split(' ');\n" +
                        "           function factory(b) {\n" +
                        "               return function () {\n" +
                        "                   var a = Array.prototype.slice.call(arguments);\n" +
                        "                   a.unshift(b);\n" +
                        "                   window.AnalysysAgent.push(a);\n" +
                        "                   return window.AnalysysAgent;\n" +
                        "               }\n" +
                        "           };\n" +
                        "           for (var i = 0; i < AnalysysAgent.methods.length; i++) {\n" +
                        "               var key = window.AnalysysAgent.methods[i];\n" +
                        "               AnalysysAgent[key] = factory(key);\n" +
                        "           }\n" +
                        "           for (var key in config) {\n" +
                        "               if (!AnalysysAgent[key]) AnalysysAgent[key] = factory(key);\n" +
                        "               AnalysysAgent[key](config[key]);\n" +
                        "           }\n" +
                        "      })({\n" +
                        "          appkey: " + appV + ", //APPKEY\n" +
                        "          uploadURL: " + urlV + ",//上传数据的地址\n" +
                        "          auto:" + formAutoV + ",// 是否开启自动采集\n" +
                        "          autoTrack:" + formAutoTrackV + ",// 是否开启全埋点\n" +
                        "      })\n" +
                        "<\/script>\n" +
                        "//引用JS SDK文件的script标签必须在初始化代码之下\n" +
                        "//建议在script标签设置id为ARK_SDK,该ID用来引导可视化模块与热图模块的加载\n" +
                        "<script type=\"text/javascript\" id=\"ARK_SDK\" src=\"" + SDKurlV + "\"><\/script>\n";
                }
                // es6 集成
                if (interES6V) {
                    jsStr = "// 从 npm 获取 sdk\n" +
                        "import  AnalysysAgent from 'ans-javascript-sdk/SDK/AnalysysAgent_JS_SDK.es6.min.js'\n" +
                        "//自行下载SDK\n" +
                        "//import AnalysysAgent from '" + SDKurlV + "'\n" +
                        "AnalysysAgent.init({\n" +
                        "    appkey: " + appV + ", //APPKEY\n" +
                        "    uploadURL: " + urlV + ",//上传数据的地址\n" +
                        "    auto:" + formAutoV + ",// 是否开启自动采集\n" +
                        "    autoTrack:" + formAutoTrackV + ",// 是否开启全埋点\n" +
                        "    SDKFileDirectory: '" + SDKurlV + "'//可视化与热图模块SDK存放目录。\n" +
                        "})\n";
                }
                // CommonJS 集成
                if (interComV) {
                    jsStr = "var AnalysysAgent = require('ans-javascript-sdk')\n" +
                        "AnalysysAgent.init({\n" +
                        "    appkey: " + appV + ", //APPKEY\n" +
                        "    uploadURL: " + urlV + ",//上传数据的地址\n" +
                        "    auto:" + formAutoV + ",// 是否开启自动采集\n" +
                        "    autoTrack:" + formAutoTrackV + ",// 是否开启全埋点\n" +
                        "    SDKFileDirectory: '" + SDKurlV + "'//可视化与热图模块SDK存放目录。\n" +
                        "}) ";

                }
                if (interAMDV) {
                    jsStr = "requirejs([\"" + SDKurlV + "/AnalysysAgent_JS_SDK.min\"], function(AnalysysAgent) {\n" +
                        "   AnalysysAgent.init({\n" +
                        "       appkey: " + appV + ", //APPKEY\n" +
                        "       uploadURL: " + urlV + ",//上传数据的地址\n" +
                        "       auto:" + formAutoV + ",// 是否开启自动采集\n" +
                        "       autoTrack:" + formAutoTrackV + ",// 是否开启全埋点\n" +
                        "       SDKFileDirectory: '" + SDKurlV + "'//可视化与热图模块SDK存放目录。\n" +
                        "   }) \n" +
                        "}); "
                }
                console.log(jsStr);
                // 文件写入 textarea
                copyText.innerHTML = ""
                copyText.innerHTML = jsStr;
            }
            // Android SDK
            if (clientType == 2) {
                console.log("安卓板块")
            }
        } else {
            alert("appid和url不能为空")
        }
    }
    // 复制代码
    copyButton.onclick = function () {
        // 把textarea选中
        copyText.select();
        document.execCommand("Copy");
    }


</script>

</html>